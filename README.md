# Mockito

In this lab, you need to create a test suite of JUnit test cases for the PizzaShop software. In its latest update, the PizzaShop software decided to handle cost and order computation in a web server. For this reason, the test cases now need to use test doubles. You can read the new requirements of the PizzaShop software in Section "PizzaShop Requirements".

**Your task is to create a test suite that achieves 100% branch coverage and uses test doubles**. All test cases should be testing the `PizzaShopWebServer.onMessage` method (similarly to the one presented in the video demonstration). **You cannot modify the code of the PizzaShop software** (you can only add test cases). As usual, all test cases should have a suitable assertion. At the end of the assignment, you will see that the methods `PizzaShopWebServer.sendJson`, `PizzaShopWebServer.onError`, and `PizzaShopWebServer.onClose` are not exercised by the tests, and that is fine. In particular, in the video demonstration, we redefined the content of the `PizzaShopWebServer.sendJson` method to be empty, and, therefore, it is expected that the original code in the method is not exercised by the tests.

You should use only one test class in your test suite (all tests should be focusing on `PizzaShopWebServer.onMessage`). You can run the tests and measure branch coverage by running the command `./gradlew clean test jacocoTestReport`. You can see the branch coverage achieved by your test suite by opening the `<dir>/build/reports/jacoco/test/html/index.html` file in a browser (branch coverage is reported in the "missed branches column" of the HTML file). The video demonstration associated with this lab shows how to create a test case with tests doubles for the PizzaShop software.


### PizzaShop Requirements

The PizzaShop store wants to create a software to take care of pizza orders. The shop makes two types of pizzas: `Napoli` and `Margherita`. A `Napoli` pizza costs six dollars, while a `Margherita` costs five dollars. Each pizza can have any number of toppings (multiple toppings of the same type are allowed). The shop offers three types of toppings: `Olives`, `Mushrooms`, and `Prosciutto`. Adding toppings increases the cost of a pizza. `Olives` and `Mushrooms` cost one more dollar each, while `Prosciutto` costs three more dollars. When the PizzaShop software creates a `Pizza` we want to compute the cost of the pizza and its description. For example, if a customer orders a margherita with olives and prosciutto, the cost of the pizza is nine dollars and the description for the pizza is `prosciutto olives margherita` (`olives prosciutto margherita` is also fine). The PizzaShop system computes the cost using the `getCost` method from the `Pizza` class and generates the pizza's description using the `getDescription` method from the same class. The PizzaShop software creates pizzas using the `PizzaShopWebServer.onMessage` method. This method takes a Json string as input. This string has the format `{"text":"order"}` where `order` contains the pizza type (i.e., `napoli` or `margherita`) and the toppings (e.g., `olives,prosciutto`). The pizza type and the toppings are separated by a space character (e.g., `margherita olives`). An example of input for the `PizzaShopWebServer.onMessage` method is `{"text":"margherita olives"}`. The software makes the pizza using the `makePizza(String,String)` method.
